function offcanvas(e=null,t,a,n,o){$("#offcanvas .offcanvas-title").empty().html(n),$.get(e+t+"/"+a+"?"+$.param(o),function(e){$("#offcanvas .offcanvas-body").html(e),document.getElementById("offcanvas").addEventListener("show.bs.offcanvas",async e=>{$("#offcanvas .offcanvas-body .select2").select2({theme:"bootstrap-5",width:"auto",dropdownParent:null!=document.querySelector(".offcanvas-body form")?".offcanvas-body form":null})})})}function getOverHere(e,t=0,a=400){$("html, body").animate({scrollTop:$(e).offset().top+t},a)}function makeToast(e,t,a=null,n,o=5e3){switch(toastr.options.progressBar=!0,t.toLowerCase()){case"error":toastr.error(n,a);break;case"success":toastr.success(n,a);break;case"warning":toastr.warning(n,a);break;case"info":toastr.info(n,a)}}function readURL(e,t,a){let n=event.target;if(n.files&&n.files[0]){let o=new FileReader;o.onload=function(n){"articles"==t?$(".jcrop-preview").css("background-image","url("+n.target.result+")"):($(".holder").css("background-image","url("+n.target.result+")").addClass("load"),$('input[name="codeimg"]').val(n.target.result)),a&&(setTimeout(()=>{$('input[name="'+e+'Width"]').val($("#"+e).width()),$('input[name="'+e+'Height"]').val($("#"+e).height())},1e3),"gallery_item"==e?$("#upload_gallery_form").find(".btn-submit").addClass("show"):$("#"+e).imgAreaSelect({handles:!0,aspectRatio:a,onSelectEnd:function(t,a){$('input[name="'+e+'-x"]').val(100*a.x1/$('input[name="'+e+'Width"]').val()),$('input[name="'+e+'-y"]').val(100*a.y1/$('input[name="'+e+'Height"]').val()),$('input[name="'+e+'-w"]').val(100*a.width/$('input[name="'+e+'Width"]').val()),$('input[name="'+e+'-h"]').val(100*a.height/$('input[name="'+e+'Height"]').val())}}))},o.readAsDataURL(n.files[0])}}function moneyFormat(e){return parseFloat(e).toFixed(1).replace(/(\d)(?=(\d{3})+\.)/g,"$1 ").replace(".",",")}function find_required(){document.querySelectorAll("[required]").forEach(e=>{var t=e.closest("div").querySelector("label");null!=t&&(t.innerHTML+='&nbsp;<span class="text-danger">*</span>')})}$("body").on("click",".delete",function(){return confirm($(this).data("message"))&&($.ajax({url:"/"+$(this).data("controller")+"/delete",method:"post",dataType:"json",data:{id:$(this).data("id"),redirect:$(this).data("redirect")?$(this).data("redirect"):window.location.href,delete:!0},success:function(e){makeToast(".toasts-place",e.type.toLowerCase(),e.type,e.message)}}),$(this).closest(".list-group-item, tr").remove()),!1}),$(".offcanvas_btn").on("click",function(e){offcanvas($(this).data("prefix"),$(this).data("controller"),$(this).data("action"),$(this).data("header"),$(this).data("params"))}),$("input[type='phone']").mask("+7 (999) 999 9999"),$(window).width()<=1080?$(".table-responsive-comment").addClass("table-responsive"):$(".table-responsive-comment").removeClass("table-responsive"),$(".agree .custom-control-input").on("click",function(){1==$(this).prop("checked")?($(".btn-agree").removeClass("disabled"),$(".btn-agree").removeAttr("disabled")):0==$(this).prop("checked")&&($(".btn-agree").addClass("disabled"),$(".btn-agree").addAttr("disabled"))}),$("#search").on("click",function(e){e.preventDefault(),$("#search_field").toggleClass("d-none")}),$(".navbar .nav-link").on("click",function(e){e.preventDefault(),window.location.href=$(this).attr("href")}),$("#items_per_page").on("change",function(e){$.post("/app/cookie",{title:"items_per_page",val:$(this).val()},function(e){location.reload()})}),$("body").on("click","#password_show",function(){$(".password").attr("type",(e,t)=>"password"==t?"text":"password")}),$("body").on("click","#password_generate",function(){$.post("/app/generate_password",{generate:"get strong"},function(e){let t=JSON.parse(e);$(".password").val(t.strong_pass).attr("type","text")})});